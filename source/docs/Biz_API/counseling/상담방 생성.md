## <a name=happytalk-bizapi-chatlist-create></a>상담방 생성

## Endpoint
[POST] /v1/chat/open

## Description
Header에 들어가는 인증 키 (`HT-Client-Id, HT-Client-Secret`)는 smurf `외부 메신저 API`에서 `key (HT-Client-Id)`와 `Token (HT-Client-Secret)`를 발급 받으실 수 있습니다.


## Request (Json)
### Header
| Field Name       | Type   | Required | Description         |
|------------------|--------|----------|---------------------|
| HT-Client-Id     | String | Y        | smurf에서 발급 받은 key   |
| HT-Client-Secret | String | Y        | smurf에서 발급 받은 token |

### Body
| Field Name          | Type (Length) | Required | Description                   | Default        |
|---------------------|---------------|----------|-------------------------------|----------------|
| uuid                | String (20)   | Y        | 고객사 고객 식별 정보 (최소 5자 ~ 최대 20자) |                |
| site_uid            | String (100)  | N        | 고객사 회원 고유 식별번호                |                |
| category_id         | Int (11)      | N        | 상담 대분류 번호                     | 첫번째 상담 대분류 아이디 |
| division_id         | Int (11)      | N        | 상담 중분류 번호                     | 첫번째 상담 중분류 아이디 |
| title               | String (100)  | N        | 상담방 제목                        |                |
| phone_os            | String (1)    | N        | 기기 구분                         | W              |
| phone_model         | String (20)   | N        | 기기 모델                         |                |
| phone_os_ver        | String (20)   | N        | 기기 OS 버전                      |                |
| phone_telecomm      | String (20)   | N        | 이용중인 이동 통신사                   |                |
| app_hash            | String (150)  | N        | 앱 식별번호                        |                |
| order_number        | String (100)  | N        | 주문 번호                         |                |
| product_number      | String (100)  | N        | 상품 번호                         |                |
| parcel_numver       | String (40)   | N        | 배송 운송장 번호                     |                |
| parcel_company_type | String (2)    | N        | 택배사 타입                        |                |
| parcel_company_code | String (2)    | N        | 택배사 코드                        |                |
| parameter1~10       | String (20)   | N        | 고객사 커스텀 파라미터                  |                |

#### Body Data Dictionary

- phone_os

| Type | Description |
|------|-------------|
| A    | 안드로이드       |
| I    | 아이폰         |
| W    | 웹           |


## Response (json)
| Field Name     | Type   | Description      |
|----------------|--------|------------------|
| code           | Int    | 성공, 실패여부         |
| room_id        | String | 생성된 방 아이디        |
| uuid           | String | 관리자 로그인 아이디      |
| type           | String | 발송된 상담 시작 메시지 타입 |
| content        | String | 발송된 상담 시작 메시지    |
| counselor_name | String | 배정된 상담원          |

### Example

#### Success
```json
{
  "code": 0,
  "room_id": "생성된 방 아이디",
  "uuid": "고객사 고객 식별 정보",
  "type": "상담 시작 메시지 타입",
  "content": "상담 시작 메시지",
  "counselor_name": "배정된 상담원"
}
```

#### Fail

- 권한 , 페이지없음
```json
{
  "code": -400,
  "message": "Forbidden"
}
```

- Authorization 잘못 되었거나 만료된 정보 , 인증실패
```json
{
  "code": -500,
  "message": "Authorization"
}
```

- 전송 실패
```json
{
  "code": -504,
  "message": "Contract"
}
```

- 내부 시스템 오류
```json
{
  "code": -600,
  "message": "System"
}
```

- 이미 종료된 상담방
```json
{
  "code": -700,
  "message": "EndRoom"
}
```

- 상담방 생성 실패
```json
{
  "code": -701,
  "message": "Room"
}
```

- 상담방 없음
```json
{
  "code": -702,
  "message": "NotRoom"
}
```

- 상담방 UUID가 다름
```json
{
  "code": -703,
  "message": "UUID"
}
```

- 현재 진행중인 상담방
```json
{
  "code": -704,
  "message": "IngRoom"
}
```

- 파라미터 검증 오류
```json
{
  "code": -800,
  "field": "파라미터 명",
  "message": "Validation(Validation-uuid)"
}
```

- 필수 파라미터 누락
```json
{
  "code": -801,
  "field": "파라미터 명",
  "message": "Required"
}
```

- 파라미터 값 길이 이상
```json
{
  "code": -802,
  "field": "파라미터 명",
  "message": "Length"
}
```

- 상담 진행을 하지 않을 때
```json
{
  "code": -900,
  "message": "Consulting",
  "room_id": 0,
  "uuid": "고객사 고객 식별 정보",
  "type": "text",
  "content": "상담불가 안내 자동메시지"
}
```

- 근무시간 외 상담 미접수
```json
{
  "code": -901,
  "message": "Consulting",
  "room_id": 0,
  "uuid": "고객사 고객 식별 정보",
  "type": "text",
  "content": "근무 시간 외 안내 자동메시지"
}
```

- 근무시간 외 상담 접수 (상담방 미생성)
```json
{
  "code": -902,
  "message": "Consulting",
  "room_id": 0,
  "uuid": "고객사 고객 식별 정보",
  "type": "text",
  "content": "근무 시간 외 안내 자동메시지"
}
```

- 근무시간 중 상담 접수 할 상당원이 없을 때 (상담방 미생성)
```json
{
  "code": -903,
  "message": "Consulting",
  "room_id": 0,
  "uuid": "고객사 고객 식별 정보",
  "type": "text",
  "content": "상담불가 안내 자동메시지"
}
```

- 제한된 상담건수 초과시
```json
{
  "code": -904,
  "message": "Consulting",
  "room_id": 0,
  "uuid": "고객사 고객 식별 정보",
  "type": "text",
  "content": "상담건수 초과 자동메시지"
}
```

- 상담 평가가 완료된 상담방
```json
{
  "code": -1001,
  "message": "Vote"
}
```