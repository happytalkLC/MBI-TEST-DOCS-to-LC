## <a name=happytalk-bizapi-chat-beforeCounselor></a>이전 상담사 연결 가능 여부

## Endpoint
[POST] /v1/chat/isCounselor

## Description
Header에 들어가는 인증 키 (`HT-Client-Id, HT-Client-Secret`)는 smurf `외부 메신저 API`에서 `key (HT-Client-Id)`와 `Token (HT-Client-Secret)`를 발급 받으실 수 있습니다.


## Request (Json)
### Header
| Field Name       | Type   | Required | Description         |
|------------------|--------|----------|---------------------|
| HT-Client-Id     | String | Y        | smurf에서 발급 받은 key   |
| HT-Client-Secret | String | Y        | smurf에서 발급 받은 token |

### Body
| Field Name  | Type (Length) | Required | Description                   | Default |
|-------------|---------------|----------|-------------------------------|---------|
| uuid        | String (20)   | Y        | 고객사 고객 식별 정보 (최소 5자 ~ 최대 20자) |         |
| customer_id | String (20)   | Y        | 고객사 고객 식별 정보                  |         |

## Response (json)
| Field Name     | Type   | Description                   |
|----------------|--------|-------------------------------|
| code           | Int    | 성공, 실패여부                      |
| counselor      | String | 이전 상담사 존재 여부                  |
| counselor_code | Int    | 상담 가능여부 (1 가능 , 0 불가능, -1 에러) |
| counselor_name | String | 상담사 이름                        |

### Example

#### Success
- 이전 상담사가 존재 할경우
```json
{
  "code": 0,
  "counselor": "exist",
  "counselor_code": 1,
  "counselor_name": "상담사"
}
```
- 이전 상담사가 존재 하지 않을 경우
```json
{
  "code": 0,
  "counselor": "not exist",
  "counselor_code": 0,
  "counselor_name": ""
}
```

#### Fail
- 일치하는 값이 없음
```json
{
    "code": 0,
    "counselor": "fail",
    "counselor_code": -1
}
```

- 권한 , 페이지없음
```json
{
  "code": -400,
  "message": "Forbidden"
}
```

- Authorization 잘못 되었거나 만료된 정보 , 인증실패
```json
{
  "code": -500,
  "message": "Authorization"
}
```

- 전송 실패
```json
{
  "code": -504,
  "message": "Contract"
}
```

- 내부 시스템 오류
```json
{
  "code": -600,
  "message": "System"
}
```

- 이미 종료된 상담방
```json
{
  "code": -700,
  "message": "EndRoom"
}
```

- 상담방 생성 실패
```json
{
  "code": -701,
  "message": "Room"
}
```

- 상담방 없음
```json
{
  "code": -702,
  "message": "NotRoom"
}
```

- 상담방 UUID가 다름
```json
{
  "code": -703,
  "message": "UUID"
}
```

- 현재 진행중인 상담방
```json
{
  "code": -704,
  "message": "IngRoom"
}
```

- 파라미터 검증 오류
```json
{
  "code": -800,
  "field": "파라미터 명",
  "message": "Validation(Validation-uuid)"
}
```

- 필수 파라미터 누락
```json
{
  "code": -801,
  "field": "파라미터 명",
  "message": "Required"
}
```

- 파라미터 값 길이 이상
```json
{
  "code": -802,
  "field": "파라미터 명",
  "message": "Length"
}
```

- 상담 진행을 하지 않을 때
```json
{
  "code": -900,
  "message": "Consulting",
  "room_id": 0,
  "uuid": "고객사 고객 식별 정보",
  "type": "text",
  "content": "상담불가 안내 자동메시지"
}
```

- 근무시간 외 상담 미접수
```json
{
  "code": -901,
  "message": "Consulting",
  "room_id": 0,
  "uuid": "고객사 고객 식별 정보",
  "type": "text",
  "content": "근무 시간 외 안내 자동메시지"
}
```

- 근무시간 외 상담 접수 (상담방 미생성)
```json
{
  "code": -902,
  "message": "Consulting",
  "room_id": 0,
  "uuid": "고객사 고객 식별 정보",
  "type": "text",
  "content": "근무 시간 외 안내 자동메시지"
}
```

- 근무시간 중 상담 접수 할 상당원이 없을 때 (상담방 미생성)
```json
{
  "code": -903,
  "message": "Consulting",
  "room_id": 0,
  "uuid": "고객사 고객 식별 정보",
  "type": "text",
  "content": "상담불가 안내 자동메시지"
}
```

- 제한된 상담건수 초과시
```json
{
  "code": -904,
  "message": "Consulting",
  "room_id": 0,
  "uuid": "고객사 고객 식별 정보",
  "type": "text",
  "content": "상담건수 초과 자동메시지"
}
```

- 상담 평가가 완료된 상담방
```json
{
  "code": -1001,
  "message": "Vote"
}
```